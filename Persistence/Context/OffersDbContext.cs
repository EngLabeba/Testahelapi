using Microsoft.EntityFrameworkCore;
using Domain.Entities;

namespace Persistence.Context
{
    public class OffersDbContext : DbContext
    {
        public OffersDbContext(DbContextOptions<OffersDbContext> options) : base(options)
        {
        }

        public DbSet<Offer> Offers { get; set; }
        public DbSet<OfferCategory> OfferCategories { get; set; }
        public DbSet<OfferLocation> OfferLocations { get; set; }
        public DbSet<OfferPlatform> OfferPlatforms { get; set; }
        public DbSet<OfferSharingMethod> OfferSharingMethods { get; set; }
        public DbSet<Dependent> Dependents { get; set; }
        public DbSet<SavedOffer> SavedOffers { get; set; }
        public DbSet<DiscountType> DiscountTypes { get; set; }
        public DbSet<OfferShare> OfferShares { get; set; }
        public DbSet<Employee> Employees { get; set; }
        public DbSet<OfferUsage> OfferUsages { get; set; }

        protected override void OnModelCreating(ModelBuilder modelBuilder)
        {
            base.OnModelCreating(modelBuilder);

            // Configure Offer entity
            modelBuilder.Entity<Offer>(entity =>
            {
                entity.HasKey(e => e.Id);
                entity.Property(e => e.Id).ValueGeneratedNever(); // GUID generated by application
                entity.Property(e => e.Title).IsRequired().HasMaxLength(200);
                entity.Property(e => e.Description).HasMaxLength(1000);
                entity.Property(e => e.DiscountValue).IsRequired().HasMaxLength(100);
                entity.Property(e => e.CreatedAt).IsRequired();
                entity.Property(e => e.ValidFrom).IsRequired();
                entity.Property(e => e.ValidUntil).IsRequired();
             
                entity.Property(e => e.ImageUrl).HasMaxLength(500);
                entity.Property(e => e.Name).IsRequired().HasMaxLength(100);
                entity.Property(e => e.TermsAndConditions).HasMaxLength(500);
                entity.Property(e => e.OrganizationName).HasMaxLength(200);
                entity.Property(e => e.OrganizationNameEnglish).HasMaxLength(200);
                entity.Property(e => e.DirectionsUrl).HasMaxLength(500);
                entity.Property(e => e.Rating).HasColumnType("decimal(3,2)");
                entity.Property(e => e.IsActive).IsRequired();

                entity.HasOne(e => e.Category)
                    .WithMany(c => c.Offers)
                    .HasForeignKey(e => e.CategoryId)
                    .OnDelete(DeleteBehavior.Restrict);

                entity.HasOne(e => e.DiscountType)
                    .WithMany(d => d.Offers)
                    .HasForeignKey(e => e.DiscountTypeId)
                    .OnDelete(DeleteBehavior.Restrict);

                // Many-to-many relationship with Locations
                entity.HasMany(e => e.Locations)
                    .WithMany(l => l.Offers)
                    .UsingEntity("OfferOfferLocation");

                // Many-to-many relationship with Platforms
                entity.HasMany(e => e.Platforms)
                    .WithMany(p => p.Offers)
                    .UsingEntity("OfferOfferPlatform");

                // Many-to-many relationship with SharingMethods
                entity.HasMany(e => e.SharingMethods)
                    .WithMany(s => s.Offers)
                    .UsingEntity("OfferOfferSharingMethod");

                entity.HasMany(e => e.SavedOffers)
                    .WithOne(s => s.Offer)
                    .HasForeignKey(s => s.OfferId)
                    .OnDelete(DeleteBehavior.Cascade);

                entity.HasOne(e => e.Employee)
                    .WithMany()
                    .HasForeignKey(e => e.EmployeeId)
                    .OnDelete(DeleteBehavior.Restrict);
            });

            // Configure Dependent entity
            modelBuilder.Entity<Dependent>(entity =>
            {
                entity.HasKey(e => e.Id);
                entity.Property(e => e.Id).ValueGeneratedOnAdd();
                entity.Property(e => e.Relationship).IsRequired().HasMaxLength(50);
                entity.Property(e => e.RelationshipEnglish).IsRequired().HasMaxLength(50);
                entity.Property(e => e.IsActive).IsRequired();
            });

            // Configure OfferCategory entity
            modelBuilder.Entity<OfferCategory>(entity =>
            {
                entity.HasKey(e => e.Id);
                entity.Property(e => e.Id).ValueGeneratedOnAdd();
                entity.Property(e => e.Name).IsRequired().HasMaxLength(100);
                entity.Property(e => e.Description).HasMaxLength(500);
                entity.Property(e => e.Icon).HasMaxLength(100);
                entity.Property(e => e.IsActive).IsRequired();
            });

            // Configure OfferLocation entity
            modelBuilder.Entity<OfferLocation>(entity =>
            {
                entity.HasKey(e => e.Id);
                entity.Property(e => e.Id).ValueGeneratedOnAdd();
                entity.Property(e => e.Name).IsRequired().HasMaxLength(200);
                entity.Property(e => e.Address).HasMaxLength(500);
                entity.Property(e => e.City).HasMaxLength(100);
                entity.Property(e => e.State).HasMaxLength(100);
                entity.Property(e => e.PostalCode).HasMaxLength(20);
                entity.Property(e => e.Country).HasMaxLength(100);
                entity.Property(e => e.IsActive).IsRequired();
            });


            // Configure OfferPlatform entity
            modelBuilder.Entity<OfferPlatform>(entity =>
            {
                entity.HasKey(e => e.Id);
                entity.Property(e => e.Id).ValueGeneratedOnAdd();
                entity.Property(e => e.Name).IsRequired().HasMaxLength(100);
                entity.Property(e => e.Description).HasMaxLength(500);
                entity.Property(e => e.Icon).HasMaxLength(100);
                entity.Property(e => e.IsActive).IsRequired();
            });

            // Configure OfferSharingMethod entity
            modelBuilder.Entity<OfferSharingMethod>(entity =>
            {
                entity.HasKey(e => e.Id);
                entity.Property(e => e.Id).ValueGeneratedOnAdd();
                entity.Property(e => e.Name).IsRequired().HasMaxLength(100);
                entity.Property(e => e.Description).HasMaxLength(500);
                entity.Property(e => e.Icon).HasMaxLength(100);
                entity.Property(e => e.IsActive).IsRequired();
            });

            // Configure DiscountType entity
            modelBuilder.Entity<DiscountType>(entity =>
            {
                entity.HasKey(e => e.Id);
                entity.Property(e => e.Id).ValueGeneratedOnAdd();
                entity.Property(e => e.Name).IsRequired().HasMaxLength(100);
                entity.Property(e => e.Description).HasMaxLength(500);
                entity.Property(e => e.Icon).HasMaxLength(100);
                entity.Property(e => e.IsActive).IsRequired();
            });

            // Configure SavedOffer entity
            modelBuilder.Entity<SavedOffer>(entity =>
            {
                entity.HasKey(e => e.Id);
                entity.Property(e => e.Id).ValueGeneratedOnAdd();
                entity.Property(e => e.UserId).HasMaxLength(100);
                entity.Property(e => e.Notes).HasMaxLength(500);
                entity.Property(e => e.SavedAt).IsRequired();
                entity.Property(e => e.IsUsed).IsRequired();
                entity.Property(e => e.UsedAt);

                entity.HasOne(e => e.Offer)
                    .WithMany(o => o.SavedOffers)
                    .HasForeignKey(e => e.OfferId)
                    .OnDelete(DeleteBehavior.Cascade);
            });

            // Configure OfferShare entity
            modelBuilder.Entity<OfferShare>(entity =>
            {
                entity.HasKey(e => e.Id);
                entity.Property(e => e.Id).ValueGeneratedOnAdd();
                entity.Property(e => e.SharedByUserId).IsRequired().HasMaxLength(100);
                entity.Property(e => e.SharedWithUserId).HasMaxLength(100);
                entity.Property(e => e.ShareToken).IsRequired().HasMaxLength(500);
                entity.Property(e => e.QrCodeIdentifier).IsRequired().HasMaxLength(50);
                entity.Property(e => e.QrCodeData).IsRequired().HasMaxLength(200);
                entity.Property(e => e.ScannedByUserId).HasMaxLength(100);
                entity.Property(e => e.Notes).HasMaxLength(500);
                entity.Property(e => e.UsageNotes).HasMaxLength(500);
                entity.Property(e => e.SharedAt).IsRequired();
                entity.Property(e => e.IsScanned).IsRequired();
                entity.Property(e => e.IsUsed).IsRequired();

                entity.HasOne(e => e.Offer)
                    .WithMany()
                    .HasForeignKey(e => e.OfferId)
                    .OnDelete(DeleteBehavior.Cascade);

                entity.HasOne(e => e.Dependent)
                    .WithMany()
                    .HasForeignKey(e => e.DependentId)
                    .OnDelete(DeleteBehavior.Restrict);

                entity.HasIndex(e => e.ShareToken).IsUnique();
                entity.HasIndex(e => e.QrCodeIdentifier).IsUnique();
            });

            // Configure Employee entity
            modelBuilder.Entity<Employee>(entity =>
            {
                entity.HasKey(e => e.Id);
                entity.Property(e => e.Id).ValueGeneratedOnAdd();
                entity.Property(e => e.EmployeeId).IsRequired().HasMaxLength(50);
                entity.Property(e => e.Name).IsRequired().HasMaxLength(200);
                entity.Property(e => e.NameEnglish).IsRequired().HasMaxLength(200);
                entity.Property(e => e.Position).IsRequired().HasMaxLength(200);
                entity.Property(e => e.PositionEnglish).IsRequired().HasMaxLength(200);
                entity.Property(e => e.Department).IsRequired().HasMaxLength(200);
                entity.Property(e => e.DepartmentEnglish).IsRequired().HasMaxLength(200);
                entity.Property(e => e.Email).HasMaxLength(100);
                entity.Property(e => e.PhoneNumber).HasMaxLength(20);
                entity.Property(e => e.Rank).IsRequired();
                entity.Property(e => e.IsActive).IsRequired();
                entity.Property(e => e.CreatedAt).IsRequired(); // Add this to force migration

                entity.HasIndex(e => e.EmployeeId).IsUnique();
            });

            // Configure OfferUsage entity
            modelBuilder.Entity<OfferUsage>(entity =>
            {
                entity.HasKey(e => e.Id);
                entity.Property(e => e.Id).ValueGeneratedOnAdd();
                entity.Property(e => e.UsedAt).IsRequired();
                entity.Property(e => e.Notes).HasMaxLength(500);
                entity.Property(e => e.LocationUsed).HasMaxLength(200);
                entity.Property(e => e.AmountSaved).HasColumnType("decimal(18,2)");
                entity.Property(e => e.IsVerified).IsRequired();
                entity.Property(e => e.VerifiedBy).HasMaxLength(100);
                entity.Property(e => e.VerifiedAt);
                entity.Property(e => e.CreatedAt).IsRequired();

                // Configure relationships
                entity.HasOne(ou => ou.Offer)
                    .WithMany()
                    .HasForeignKey(ou => ou.OfferId)
                    .OnDelete(DeleteBehavior.Cascade);

                entity.HasOne(ou => ou.Employee)
                    .WithMany()
                    .HasForeignKey(ou => ou.EmployeeId)
                    .OnDelete(DeleteBehavior.Restrict);

                entity.HasOne(ou => ou.Dependent)
                    .WithMany()
                    .HasForeignKey(ou => ou.DependentId)
                    .OnDelete(DeleteBehavior.Restrict);

                // Create indexes for performance
                entity.HasIndex(ou => new { ou.OfferId, ou.EmployeeId, ou.DependentId, ou.UsedAt });
                entity.HasIndex(ou => ou.UsedAt);
                entity.HasIndex(ou => ou.EmployeeId);
                entity.HasIndex(ou => ou.OfferId);
            });

            // Seed initial data
            SeedData(modelBuilder);
        }

        private void SeedData(ModelBuilder modelBuilder)
        {
            // Seed categories
            modelBuilder.Entity<OfferCategory>().HasData(
                new OfferCategory { Id = 1, Name = "Ø¹Ø±ÙˆØ¶ Ù…ØªÙ†ÙˆØ¹Ø©", Description = "Diverse Offers", Icon = "ğŸ¯" },
                new OfferCategory { Id = 2, Name = "Ø®Ø¯Ù…Ø§Øª Ù…ØµØ±ÙÙŠÙ‡", Description = "Banking Services", Icon = "ğŸ¦" },
                new OfferCategory { Id = 3, Name = "ØµØ­Ø© ÙˆØ·Ø¨", Description = "Health and Medicine", Icon = "ğŸ¥" },
                new OfferCategory { Id = 4, Name = "Ø³ÙØ± ÙˆØ³ÙŠØ§Ø­Ø©", Description = "Travel and Tourism", Icon = "âœˆï¸" },
                new OfferCategory { Id = 5, Name = "ØªØ³ÙˆÙ‚ ÙˆØ¨ÙŠØ¹", Description = "Shopping and Retail", Icon = "ğŸ›ï¸" }
            );

            // Seed locations
            modelBuilder.Entity<OfferLocation>().HasData(
                new OfferLocation { Id = 1, Name = "Ø§Ù„Ø±ÙŠØ§Ø¶", City = "Ø§Ù„Ø±ÙŠØ§Ø¶", State = "Ø§Ù„Ø±ÙŠØ§Ø¶", Country = "Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©", Latitude = 24.7136, Longitude = 46.6753 },
                new OfferLocation { Id = 2, Name = "Ø¬Ø¯Ø©", City = "Ø¬Ø¯Ø©", State = "Ù…ÙƒØ©", Country = "Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©", Latitude = 21.4858, Longitude = 39.1925 },
                new OfferLocation { Id = 3, Name = "Ø£ÙˆÙ†Ù„Ø§ÙŠÙ†", City = "", State = "", Country = "", Latitude = null, Longitude = null },
                new OfferLocation { Id = 4, Name = "Ø§Ù„Ø¯Ù…Ø§Ù…", City = "Ø§Ù„Ø¯Ù…Ø§Ù…", State = "Ø§Ù„Ø´Ø±Ù‚ÙŠØ©", Country = "Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©", Latitude = 26.4207, Longitude = 50.0888 },
                new OfferLocation { Id = 5, Name = "Ù…ÙƒØ© Ø§Ù„Ù…ÙƒØ±Ù…Ø©", City = "Ù…ÙƒØ© Ø§Ù„Ù…ÙƒØ±Ù…Ø©", State = "Ù…ÙƒØ©", Country = "Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©", Latitude = 21.3891, Longitude = 39.8579 },
                new OfferLocation { Id = 6, Name = "Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© Ø§Ù„Ù…Ù†ÙˆØ±Ø©", City = "Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© Ø§Ù„Ù…Ù†ÙˆØ±Ø©", State = "Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©", Country = "Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©", Latitude = 24.5247, Longitude = 39.5692 },
                new OfferLocation { Id = 7, Name = "Ø§Ù„Ø·Ø§Ø¦Ù", City = "Ø§Ù„Ø·Ø§Ø¦Ù", State = "Ù…ÙƒØ©", Country = "Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©", Latitude = 21.2703, Longitude = 40.4158 },
                new OfferLocation { Id = 8, Name = "Ø¨Ø±ÙŠØ¯Ø©", City = "Ø¨Ø±ÙŠØ¯Ø©", State = "Ø§Ù„Ù‚ØµÙŠÙ…", Country = "Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©", Latitude = 26.3260, Longitude = 43.9750 },
                new OfferLocation { Id = 9, Name = "ØªØ¨ÙˆÙƒ", City = "ØªØ¨ÙˆÙƒ", State = "ØªØ¨ÙˆÙƒ", Country = "Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©", Latitude = 28.3838, Longitude = 36.5550 },
                new OfferLocation { Id = 10, Name = "Ø®Ù…ÙŠØ³ Ù…Ø´ÙŠØ·", City = "Ø®Ù…ÙŠØ³ Ù…Ø´ÙŠØ·", State = "Ø¹Ø³ÙŠØ±", Country = "Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©", Latitude = 18.3000, Longitude = 42.7333 }
            );


            // Seed platforms
            modelBuilder.Entity<OfferPlatform>().HasData(
                new OfferPlatform { Id = 1, Name = "Ù…ÙˆÙ‚Ø¹", Description = "Website", Icon = "ğŸŒ" },
                new OfferPlatform { Id = 2, Name = "ØªØ·Ø¨ÙŠÙ‚", Description = "Mobile App", Icon = "ğŸ“±" },
                new OfferPlatform { Id = 3, Name = "ÙˆØ§ØªØ³Ø§Ø¨", Description = "WhatsApp", Icon = "ğŸ’¬" },
                new OfferPlatform { Id = 4, Name = "ÙˆØ³Ø§Ø¦Ù„ Ø§Ù„ØªÙˆØ§ØµÙ„", Description = "Social Media", Icon = "ğŸ“¢" },
                new OfferPlatform { Id = 5, Name = "Ø¨Ø±ÙŠØ¯ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ", Description = "Email", Icon = "ğŸ“§" }
            );

            // Seed sharing methods
            modelBuilder.Entity<OfferSharingMethod>().HasData(
                new OfferSharingMethod { Id = 1, Name = "Ù…Ø´Ø§Ø±ÙƒØ© Ù…Ø¹ Ø§Ù„ØªØ§Ø¨Ø¹ÙŠÙ†", Description = "Share with Dependents", Icon = "ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦" },
                new OfferSharingMethod { Id = 2, Name = "Ù…Ø´Ø§Ø±ÙƒØ© Ù…Ø¹ Ù…Ù†Ø³ÙˆØ¨ÙŠ Ø§Ù„Ø£Ù…Ø§Ù†Ø©", Description = "Share with Municipality Employees", Icon = "ğŸ‘¥" },
                new OfferSharingMethod { Id = 3, Name = "Ù…Ø´Ø§Ø±ÙƒØ© Ø¹Ù„Ù‰ ÙˆØ³Ø§Ø¦Ù„ Ø§Ù„ØªÙˆØ§ØµÙ„", Description = "Share on Social Media", Icon = "ğŸ“±" },
                new OfferSharingMethod { Id = 4, Name = "Ø±Ø§Ø¨Ø· Ù…Ø¨Ø§Ø´Ø±", Description = "Direct Link", Icon = "ğŸ”—" },
                new OfferSharingMethod { Id = 5, Name = "Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ©", Description = "Cannot be Shared", Icon = "ğŸš«" }
            );

            // Seed discount types
            modelBuilder.Entity<DiscountType>().HasData(
                new DiscountType { Id = 1, Name = "Ù†Ø³Ø¨Ø© Ù…Ø¦ÙˆÙŠØ©", Description = "Percentage Discount", Icon = "ğŸ“Š" },
                new DiscountType { Id = 2, Name = "Ø¹Ø±ÙˆØ¶ Ø®Ø§ØµØ©", Description = "Special Offers", Icon = "â­" },
                new DiscountType { Id = 3, Name = "Ù…Ø¨Ù„Øº Ø«Ø§Ø¨Øª", Description = "Fixed Amount Discount", Icon = "ğŸ’°" },
                new DiscountType { Id = 4, Name = "Ø¹Ø±Ø¶ Ù…Ø¬Ø§Ù†ÙŠ", Description = "Free Offer", Icon = "ğŸ" }
            );

            // Seed dependents (relationship types only)
            modelBuilder.Entity<Dependent>().HasData(
                new Dependent { Id = 1, Relationship = "Ø²ÙˆØ¬Ø©", RelationshipEnglish = "Wife" },
                new Dependent { Id = 2, Relationship = "Ø§Ø¨Ù†", RelationshipEnglish = "Son" },
                new Dependent { Id = 3, Relationship = "Ø£Ø¨Ù†Ø©", RelationshipEnglish = "Daughter" },
                new Dependent { Id = 4, Relationship = "Ø£Ø¨", RelationshipEnglish = "Father" },
                new Dependent { Id = 5, Relationship = "Ø£Ù…", RelationshipEnglish = "Mother" },
                new Dependent { Id = 6, Relationship = "Ø£Ø®", RelationshipEnglish = "Brother" },
                new Dependent { Id = 7, Relationship = "Ø£Ø®Øª", RelationshipEnglish = "Sister" }
            );

            // Seed sample offers
            SampleOffers.SeedSampleOffers(modelBuilder);
            
            // Seed employees
            SeedEmployees(modelBuilder);
            
            // Seed saved offers
            SeedSavedOffers(modelBuilder);
        }
        
        private void SeedEmployees(ModelBuilder modelBuilder)
        {
            modelBuilder.Entity<Employee>().HasData(
                new Employee 
                { 
                    Id = 1, 
                    EmployeeId = "EMP001", 
                    Name = "Ù…Ø­Ù…Ø¯ Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡ Ø£Ø­Ù…Ø¯", 
                    NameEnglish = "Mohammed Abdullah Ahmed",
                    Position = "Ù…Ø¯ÙŠØ± ÙˆØ­Ø¯Ø© Ø§Ù„ØªØµÙˆÙŠØ±", 
                    PositionEnglish = "Director of Photography Unit",
                    Rank = 8,
                    Department = "Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¥Ø¹Ù„Ø§Ù… ÙˆØ§Ù„Ø§ØªØµØ§Ù„ Ø§Ù„Ù…Ø¤Ø³Ø³ÙŠ", 
                    DepartmentEnglish = "Media and Corporate Communication Department",
                    Email = "mohammed.ahmed@riyadh.gov.sa",
                    PhoneNumber = "+966501234567",
                    CreatedAt = DateTime.UtcNow,
                    IsActive = true
                },
                new Employee 
                { 
                    Id = 2, 
                    EmployeeId = "EMP002", 
                    Name = "ÙØ§Ø·Ù…Ø© Ù…Ø­Ù…Ø¯ Ø§Ù„Ø³Ø¹ÙŠØ¯", 
                    NameEnglish = "Fatima Mohammed Al-Saeed",
                    Position = "Ø£Ø®ØµØ§Ø¦ÙŠØ© Ø¹Ù„Ø§Ù‚Ø§Øª Ø¹Ø§Ù…Ø©", 
                    PositionEnglish = "Public Relations Specialist",
                    Rank = 6,
                    Department = "Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¥Ø¹Ù„Ø§Ù… ÙˆØ§Ù„Ø§ØªØµØ§Ù„ Ø§Ù„Ù…Ø¤Ø³Ø³ÙŠ", 
                    DepartmentEnglish = "Media and Corporate Communication Department",
                    Email = "fatima.alsaeed@riyadh.gov.sa",
                    PhoneNumber = "+966501234568",
                    CreatedAt = DateTime.UtcNow,
                    IsActive = true
                },
                new Employee 
                { 
                    Id = 3, 
                    EmployeeId = "EMP003", 
                    Name = "Ø£Ø­Ù…Ø¯ Ø®Ø§Ù„Ø¯ Ø§Ù„Ù…Ø·ÙŠØ±ÙŠ", 
                    NameEnglish = "Ahmed Khalid Al-Mutairi",
                    Position = "Ù…Ø·ÙˆØ± ØªØ·Ø¨ÙŠÙ‚Ø§Øª", 
                    PositionEnglish = "Application Developer",
                    Rank = 7,
                    Department = "Ø¥Ø¯Ø§Ø±Ø© ØªÙ‚Ù†ÙŠØ© Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª", 
                    DepartmentEnglish = "Information Technology Department",
                    Email = "ahmed.almutairi@riyadh.gov.sa",
                    PhoneNumber = "+966501234569",
                    CreatedAt = DateTime.UtcNow,
                    IsActive = true
                },
                new Employee 
                { 
                    Id = 4, 
                    EmployeeId = "EMP004", 
                    Name = "Ù†ÙˆØ±Ø§ Ø¹Ø¨Ø¯Ø§Ù„Ø±Ø­Ù…Ù† Ø§Ù„Ù‚Ø­Ø·Ø§Ù†ÙŠ", 
                    NameEnglish = "Nora Abdulrahman Al-Qahtani",
                    Position = "Ù…Ø­Ø§Ø³Ø¨Ø©", 
                    PositionEnglish = "Accountant",
                    Rank = 5,
                    Department = "Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø§Ù„ÙŠØ©", 
                    DepartmentEnglish = "Finance Department",
                    Email = "nora.alqahtani@riyadh.gov.sa",
                    PhoneNumber = "+966501234570",
                    CreatedAt = DateTime.UtcNow,
                    IsActive = true
                },
                new Employee 
                { 
                    Id = 5, 
                    EmployeeId = "EMP005", 
                    Name = "Ø³Ø¹Ø¯ Ù…Ø­Ù…Ø¯ Ø§Ù„ØºØ§Ù…Ø¯ÙŠ", 
                    NameEnglish = "Saad Mohammed Al-Ghamdi",
                    Position = "Ù…Ø¯ÙŠØ± Ø§Ù„Ù…ÙˆØ§Ø±Ø¯ Ø§Ù„Ø¨Ø´Ø±ÙŠØ©", 
                    PositionEnglish = "Human Resources Manager",
                    Rank = 9,
                    Department = "Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ÙˆØ§Ø±Ø¯ Ø§Ù„Ø¨Ø´Ø±ÙŠØ©", 
                    DepartmentEnglish = "Human Resources Department",
                    Email = "saad.alghamdi@riyadh.gov.sa",
                    PhoneNumber = "+966501234571",
                    CreatedAt = DateTime.UtcNow,
                    IsActive = true
                }
            );
        }
        
        private void SeedSavedOffers(ModelBuilder modelBuilder)
        {
            var savedOffers = new List<SavedOffer>();
            var random = new Random(42);
            
            // Create saved offers for different users
            var userIds = new[] { "user123", "user456", "user789", "user101", "user202" };
            var offerIds = Enumerable.Range(1, 50).ToArray(); // Assuming we have 50 offers
            
            for (int i = 1; i <= 25; i++) // Create 25 saved offers
            {
                var userId = userIds[random.Next(userIds.Length)];
                var offerId = offerIds[random.Next(offerIds.Length)];
                var savedAt = DateTime.UtcNow.AddDays(-random.Next(1, 30));
                
                savedOffers.Add(new SavedOffer
                {
                    Id = i,
                    OfferId = offerId,
                    UserId = userId,
                    SavedAt = savedAt,
                    Notes = random.Next(0, 2) == 1 ? $"Ù…Ù„Ø§Ø­Ø¸Ø© Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… {userId}" : null,
                    IsUsed = random.Next(0, 3) == 0, // 33% chance of being used
                    UsedAt = random.Next(0, 3) == 0 ? savedAt.AddDays(random.Next(1, 15)) : null,
                    CreatedAt = savedAt,
                    IsActive = true
                });
            }
            
            modelBuilder.Entity<SavedOffer>().HasData(savedOffers.ToArray());
        }
    }
}
